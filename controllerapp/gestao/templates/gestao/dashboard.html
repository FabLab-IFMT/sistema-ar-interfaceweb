{% extends 'layout.html' %}
{% load static %}

{% block title %}Dashboard de Gestão{% endblock %}

{% block head %}
<style>
/* ── Gestão Dashboard — Institutional Theme ── */
.gd-hero{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);padding:2.5rem 0;color:#fff;margin-bottom:0}
.gd-hero h1{font-weight:800;font-size:2rem;margin:0}
.gd-hero p{opacity:.8;margin:.25rem 0 0}

.gd-card{background:var(--white);border-radius:var(--radius);border:1px solid var(--border);box-shadow:0 2px 12px rgba(11,37,69,.06);transition:var(--transition);overflow:hidden;height:100%}
.gd-card:hover{box-shadow:0 8px 28px rgba(11,37,69,.1);transform:translateY(-3px)}

.gd-icon{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.6rem;color:#fff;margin:0 auto 1rem;flex-shrink:0}
.gd-icon-primary{background:linear-gradient(135deg,var(--primary),var(--primary-light))}
.gd-icon-accent{background:linear-gradient(135deg,var(--accent),var(--accent-light))}
.gd-icon-green{background:linear-gradient(135deg,#059669,#10b981)}
.gd-icon-red{background:linear-gradient(135deg,#dc2626,#ef4444)}

.gd-feature-title{font-weight:700;font-size:1.05rem;color:var(--text);margin-bottom:.5rem}
.gd-feature-desc{font-size:.88rem;color:var(--text-muted);line-height:1.5;margin-bottom:1rem}

.gd-btn{border-radius:50px;font-size:.85rem;font-weight:600;padding:.45rem 1.25rem;transition:var(--transition)}
.gd-btn-primary{background:var(--accent);border:none;color:#fff}
.gd-btn-primary:hover{background:var(--accent-light);color:#fff;transform:translateY(-1px)}
.gd-btn-outline{background:transparent;border:1px solid var(--border);color:var(--text-muted)}
.gd-btn-outline:hover{border-color:var(--accent);color:var(--accent)}

.gd-badge-soon{display:inline-block;background:rgba(234,179,8,.15);color:#a16207;font-size:.72rem;font-weight:600;padding:.25rem .65rem;border-radius:50px;margin-top:.5rem}

/* Integration list */
.gd-integrations .list-group-item{border:none;border-bottom:1px solid var(--border);padding:.75rem 0;font-size:.88rem;font-weight:500}
.gd-integrations .list-group-item:last-child{border-bottom:none}
.gd-status-dot{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:.5rem}
.gd-status-online{background:#10b981}
.gd-status-offline{background:#ef4444}

/* Log table */
.gd-log-badge{font-size:.72rem;font-weight:600;padding:.2rem .55rem;border-radius:50px}

/* Quick links */
.gd-quick-link{display:flex;align-items:center;justify-content:space-between;padding:.85rem 1rem;border-radius:var(--radius-sm);background:var(--surface-alt);text-decoration:none;color:var(--text);font-weight:500;font-size:.88rem;transition:var(--transition)}
.gd-quick-link:hover{background:var(--white);box-shadow:0 2px 8px rgba(11,37,69,.08);color:var(--accent);transform:translateX(3px)}
.gd-quick-link i.fa-chevron-right{color:var(--text-muted);transition:var(--transition)}
.gd-quick-link:hover i.fa-chevron-right{color:var(--accent)}

@media(max-width:768px){
  .gd-hero h1{font-size:1.5rem}
}
</style>
{% endblock %}

{% block content %}
<!-- Hero -->
<section class="gd-hero">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
      <div>
        <h1><i class="fas fa-tachometer-alt me-2"></i>{{ titulo }}</h1>
        <p class="mb-0">Ferramentas administrativas avançadas do laboratório</p>
      </div>
      {% if user.is_superuser %}
      <a href="{% url 'gestao:gerenciar_acessos' %}" class="btn btn-outline-light btn-sm" style="border-radius:50px">
        <i class="fas fa-users-cog me-1"></i> Gerenciar Acessos
      </a>
      {% endif %}
    </div>
  </div>
</section>

<div class="container py-4">

  <!-- Info Banner -->
  <div style="background:rgba(19,103,138,.08);border:1px solid rgba(19,103,138,.15);border-radius:var(--radius);padding:1rem 1.25rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem">
    <i class="fas fa-info-circle" style="color:var(--accent);font-size:1.2rem"></i>
    <span style="font-size:.9rem;color:var(--text)">Bem-vindo à área de gestão. Aqui você encontra ferramentas administrativas avançadas para o FABLAB.</span>
  </div>

  <!-- Feature Cards -->
  <div class="row g-4 mb-4">
    <!-- Métricas -->
    <div class="col-md-4">
      <div class="gd-card text-center p-4">
        <div class="gd-icon gd-icon-primary"><i class="fas fa-chart-pie"></i></div>
        <h5 class="gd-feature-title">Métricas & Monitoramento</h5>
        <p class="gd-feature-desc">Visualize estatísticas e acompanhe métricas detalhadas sobre o desempenho do laboratório.</p>
        <a href="{% url 'gestao:monitoramento' %}" class="btn gd-btn gd-btn-primary">
          <i class="fas fa-chart-line me-1"></i> Acessar Monitoramento
        </a>
      </div>
    </div>

    <!-- Configurações -->
    <div class="col-md-4">
      <div class="gd-card text-center p-4">
        <div class="gd-icon gd-icon-green"><i class="fas fa-cogs"></i></div>
        <h5 class="gd-feature-title">Configurações do Sistema</h5>
        <p class="gd-feature-desc">Ajuste os parâmetros e configurações gerais do sistema de gestão do laboratório.</p>
        <button disabled class="btn gd-btn gd-btn-outline">
          <i class="fas fa-clock me-1"></i> Em breve
        </button>
        <div class="gd-badge-soon mt-2 d-block">Em desenvolvimento</div>
      </div>
    </div>

    <!-- Status Real-time -->
    <div class="col-md-4">
      <div class="gd-card text-center p-4">
        <div class="gd-icon gd-icon-red"><i class="fas fa-heartbeat"></i></div>
        <h5 class="gd-feature-title">Status em Tempo Real</h5>
        <p class="gd-feature-desc">Acompanhe o status atual de todos os equipamentos e serviços do FABLAB.</p>
        <button disabled class="btn gd-btn gd-btn-outline">
          <i class="fas fa-clock me-1"></i> Em breve
        </button>
        <div class="gd-badge-soon mt-2 d-block">Em desenvolvimento</div>
      </div>
    </div>
  </div>

  <!-- Integrations + Logs -->
  <div class="row g-4 mb-4">
    <!-- Integrações -->
    <div class="col-md-6">
      <div class="gd-card p-4">
        <h5 class="gd-feature-title mb-3"><i class="fas fa-plug me-2" style="color:var(--accent)"></i>Integrações</h5>
        <p class="gd-feature-desc">Conexões com sistemas externos e APIs integradas ao FABLAB.</p>
        <ul class="list-group gd-integrations mb-3">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Sistema Acadêmico
            <span><span class="gd-status-dot gd-status-online"></span><span style="font-size:.8rem;color:#059669;font-weight:600">Online</span></span>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            API de Notificações
            <span><span class="gd-status-dot gd-status-online"></span><span style="font-size:.8rem;color:#059669;font-weight:600">Online</span></span>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Sistema de Inventário
            <span><span class="gd-status-dot gd-status-online"></span><span style="font-size:.8rem;color:#059669;font-weight:600">Online</span></span>
          </li>
        </ul>
        <a href="#" class="btn gd-btn gd-btn-outline btn-sm"><i class="fas fa-sliders-h me-1"></i>Configurar Integrações</a>
      </div>
    </div>

    <!-- Logs -->
    <div class="col-md-6">
      <div class="gd-card p-4">
        <h5 class="gd-feature-title mb-3"><i class="fas fa-file-alt me-2" style="color:var(--accent)"></i>Logs do Sistema</h5>
        <p class="gd-feature-desc">Registros de atividades e eventos recentes do sistema.</p>
        <div class="table-responsive mb-3">
          <table class="table table-sm mb-0" style="font-size:.85rem">
            <thead>
              <tr style="border-bottom:2px solid var(--border)">
                <th style="font-weight:600;color:var(--text)">Timestamp</th>
                <th style="font-weight:600;color:var(--text)">Nível</th>
                <th style="font-weight:600;color:var(--text)">Descrição</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="color:var(--text-muted)">{% now "d/m/y H:i" %}</td>
                <td><span class="gd-log-badge" style="background:rgba(19,103,138,.12);color:var(--accent)">INFO</span></td>
                <td>Acesso ao dashboard de gestão</td>
              </tr>
              <tr>
                <td style="color:var(--text-muted)">{% now "d/m/y H:i" %}</td>
                <td><span class="gd-log-badge" style="background:rgba(234,179,8,.12);color:#a16207">WARNING</span></td>
                <td>Tentativa de acesso não autorizado</td>
              </tr>
              <tr>
                <td style="color:var(--text-muted)">{% now "d/m/y H:i" %}</td>
                <td><span class="gd-log-badge" style="background:rgba(22,163,74,.12);color:#15803d">SUCCESS</span></td>
                <td>Backup do sistema realizado</td>
              </tr>
            </tbody>
          </table>
        </div>
        <a href="{% url 'logs:index' %}" class="btn gd-btn gd-btn-outline btn-sm"><i class="fas fa-history me-1"></i>Ver Todos os Logs</a>
      </div>
    </div>
  </div>

  <!-- Quick Links -->
  <div class="gd-card p-4">
    <h5 class="gd-feature-title mb-3"><i class="fas fa-link me-2" style="color:var(--accent)"></i>Links Rápidos</h5>
    <div class="row g-3">
      {% if user.is_superuser %}
      <div class="col-md-3 col-sm-6">
        <a href="{% url 'gestao:gerenciar_acessos' %}" class="gd-quick-link">
          <span><i class="fas fa-users-cog me-2" style="color:var(--primary)"></i>Gerenciar Acessos</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>
      {% endif %}
      <div class="col-md-3 col-sm-6">
        <a href="{% url 'gestao:monitoramento' %}" class="gd-quick-link">
          <span><i class="fas fa-chart-line me-2" style="color:#059669"></i>Monitoramento</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>
      <div class="col-md-3 col-sm-6">
        <a href="{% url 'logs:index' %}" class="gd-quick-link">
          <span><i class="fas fa-history me-2" style="color:var(--accent)"></i>Logs do Sistema</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>
      <div class="col-md-3 col-sm-6">
        <a href="{% url 'admin:index' %}" class="gd-quick-link">
          <span><i class="fas fa-user-shield me-2" style="color:#dc2626"></i>Admin Django</span>
          <i class="fas fa-chevron-right"></i>
        </a>
      </div>
    </div>
  </div>

</div>
{% endblock %}
