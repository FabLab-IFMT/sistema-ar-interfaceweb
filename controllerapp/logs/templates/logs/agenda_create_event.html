{% extends 'layout.html' %}
{% load static %}

{% block title %}Criar Novo Evento — FabLab{% endblock %}

{% block head %}
<style>
/* ── Criar Evento ─────────────────────────────────── */
.ce-hero{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);padding:3rem 0 2.5rem;color:#fff;margin-bottom:2.5rem}
.ce-hero h1{font-weight:700;font-size:1.75rem;margin:0}
.ce-hero p{opacity:.8;margin:.5rem 0 0}
.ce-breadcrumb{display:flex;gap:.5rem;font-size:.85rem;opacity:.7;margin-bottom:.75rem}
.ce-breadcrumb a{color:#fff;text-decoration:none}
.ce-breadcrumb a:hover{text-decoration:underline}

.ce-card{background:var(--white);border-radius:var(--radius);box-shadow:0 4px 24px rgba(11,37,69,.07);overflow:hidden;margin-bottom:2rem}
.ce-card-head{background:var(--surface-alt);padding:1.25rem 1.75rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:.75rem}
.ce-card-head i{font-size:1.1rem;color:var(--accent)}
.ce-card-head h2{font-size:1.1rem;font-weight:600;margin:0;color:var(--text)}
.ce-card-body{padding:1.75rem}

.ce-group{margin-bottom:1.5rem}
.ce-group label{display:block;font-weight:600;font-size:.875rem;color:var(--text);margin-bottom:.4rem}
.ce-group label .req{color:#EF4444;margin-left:2px}
.ce-group .form-control,
.ce-group select{width:100%;border:1px solid var(--border);border-radius:var(--radius-sm);padding:.6rem .9rem;font-size:.9rem;transition:border var(--transition),box-shadow var(--transition);background:var(--white)}
.ce-group .form-control:focus,
.ce-group select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(19,103,138,.12);outline:none}
.ce-group textarea.form-control{resize:vertical;min-height:100px}
.ce-group .help{font-size:.8rem;color:var(--text-muted);margin-top:.3rem}
.ce-group .err{font-size:.8rem;color:#EF4444;margin-top:.3rem}

.ce-row{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}
@media(max-width:576px){.ce-row{grid-template-columns:1fr}}

.ce-info{display:flex;align-items:flex-start;gap:.75rem;background:rgba(19,103,138,.06);border-left:3px solid var(--accent);border-radius:var(--radius-sm);padding:1rem 1.25rem;margin-bottom:1.5rem}
.ce-info i{color:var(--accent);margin-top:2px}
.ce-info p{margin:0;font-size:.875rem;color:var(--text)}

.ce-actions{display:flex;gap:.75rem;padding-top:.5rem}
.ce-actions .fl-btn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.7rem 1.25rem;border-radius:var(--radius-sm);font-weight:600;font-size:.9rem;border:none;cursor:pointer;transition:all var(--transition);text-decoration:none}
.ce-actions .fl-btn-primary{background:var(--accent);color:#fff}
.ce-actions .fl-btn-primary:hover{background:var(--accent-light);transform:translateY(-1px);box-shadow:0 4px 12px rgba(19,103,138,.25)}
.ce-actions .fl-btn-outline{background:transparent;border:1.5px solid var(--border);color:var(--text-muted)}
.ce-actions .fl-btn-outline:hover{border-color:var(--text);color:var(--text)}
</style>
{% endblock %}

{% block content %}
<!-- Hero -->
<section class="ce-hero">
  <div class="container">
    <div class="ce-breadcrumb"><a href="{% url 'logs:agenda_home' %}">Agenda</a> <span>/</span> <span>Criar Evento</span></div>
    <h1><i class="fas fa-calendar-plus me-2"></i>Criar Novo Evento</h1>
    <p>Preencha as informações abaixo para adicionar um evento ao calendário.</p>
  </div>
</section>

<div class="container" style="max-width:740px;margin-bottom:3rem">
  {% if form.non_field_errors %}
    <div class="alert alert-danger mb-3">
      {% for error in form.non_field_errors %}{{ error }}{% endfor %}
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}

    <!-- Informações Básicas -->
    <div class="ce-card">
      <div class="ce-card-head"><i class="fas fa-pen-fancy"></i><h2>Informações do Evento</h2></div>
      <div class="ce-card-body">
        <div class="ce-group">
          <label for="{{ form.title.id_for_label }}">Título <span class="req">*</span></label>
          {{ form.title }}
          <div class="help">Nome curto e descritivo do evento</div>
          {% for error in form.title.errors %}<div class="err">{{ error }}</div>{% endfor %}
        </div>

        <div class="ce-group">
          <label for="{{ form.event_type.id_for_label }}">Tipo de Evento <span class="req">*</span></label>
          {{ form.event_type }}
          {% for error in form.event_type.errors %}<div class="err">{{ error }}</div>{% endfor %}
        </div>

        <div class="ce-group">
          <label for="{{ form.description.id_for_label }}">Descrição</label>
          {{ form.description }}
          <div class="help">Detalhes sobre o evento, público-alvo, recursos necessários, etc.</div>
          {% for error in form.description.errors %}<div class="err">{{ error }}</div>{% endfor %}
        </div>
      </div>
    </div>

    <!-- Data e Hora -->
    <div class="ce-card">
      <div class="ce-card-head"><i class="fas fa-clock"></i><h2>Data e Horário</h2></div>
      <div class="ce-card-body">
        <div class="ce-row">
          <div class="ce-group">
            <label for="{{ form.start_time.id_for_label }}">Início <span class="req">*</span></label>
            {{ form.start_time }}
            {% for error in form.start_time.errors %}<div class="err">{{ error }}</div>{% endfor %}
          </div>
          <div class="ce-group">
            <label for="{{ form.end_time.id_for_label }}">Término <span class="req">*</span></label>
            {{ form.end_time }}
            {% for error in form.end_time.errors %}<div class="err">{{ error }}</div>{% endfor %}
          </div>
        </div>
        <div class="help" style="margin-top:-.5rem"><i class="fas fa-info-circle me-1"></i>O horário de término deve ser posterior ao de início.</div>
      </div>
    </div>

    <!-- Nota admin -->
    <div class="ce-info">
      <i class="fas fa-shield-alt"></i>
      <p>Como você é <strong>administrador</strong>, o evento será <strong>aprovado automaticamente</strong> e aparecerá no calendário.</p>
    </div>

    <!-- Ações -->
    <div class="ce-actions">
      <a href="{% url 'logs:agenda_home' %}" class="fl-btn fl-btn-outline"><i class="fas fa-arrow-left"></i> Cancelar</a>
      <button type="submit" class="fl-btn fl-btn-primary"><i class="fas fa-check"></i> Criar Evento</button>
    </div>
  </form>
</div>
{% endblock %}
