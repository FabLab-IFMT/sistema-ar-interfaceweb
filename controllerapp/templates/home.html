{% extends 'layout.html' %}
{% load static %}

{% block title %}FabLab - Laboratório de Fabricação Digital{% endblock %}

{% block content %}

  <!-- ===== Hero / Carrossel ===== -->
  <section class="fl-hero">
    <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-indicators">
        {% for image in carousel_images %}
          <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="{{ forloop.counter0 }}"
                {% if forloop.first %}class="active" aria-current="true"{% endif %}
                aria-label="Slide {{ forloop.counter }}"></button>
        {% empty %}
          <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active" aria-current="true"></button>
          <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
          <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
        {% endfor %}
      </div>

      <div class="carousel-inner">
        {% for image in carousel_images %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            {% if image.link %}<a href="{{ image.link }}">{% endif %}
              {% if image.image and image.image.name %}
              <img src="{{ image.image.url }}" class="d-block w-100" alt="{{ image.caption|default:'FabLab IFMT' }}">
              {% else %}
              <img src="https://via.placeholder.com/1200x480?text=FabLab" class="d-block w-100" alt="FabLab IFMT">
              {% endif %}
            {% if image.link %}</a>{% endif %}
            {% if image.caption or image.description %}
              <div class="carousel-caption d-none d-md-block">
                {% if image.caption %}<h2>{{ image.caption }}</h2>{% endif %}
                {% if image.description %}<p>{{ image.description }}</p>{% endif %}
              </div>
            {% endif %}
          </div>
        {% empty %}
          <div class="carousel-item active">
            <img src="{% static 'images/carrossel/imagem1.png' %}" class="d-block w-100" alt="FabLab">
            <div class="carousel-caption d-none d-md-block">
              <h2>Crie. Aprenda. Inove.</h2>
              <p>Explore as possibilidades no FabLab IFMT</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'images/carrossel/imagem2.png' %}" class="d-block w-100" alt="Tecnologia">
            <div class="carousel-caption d-none d-md-block">
              <h2>Tecnologia ao seu alcance</h2>
              <p>Equipamentos de última geração para seus projetos</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'images/carrossel/imagem3.png' %}" class="d-block w-100" alt="Comunidade">
            <div class="carousel-caption d-none d-md-block">
              <h2>Comunidade Maker</h2>
              <p>Aprenda e compartilhe conhecimento</p>
            </div>
          </div>
        {% endfor %}
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Anterior</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Próximo</span>
      </button>
    </div>
  </section>

  <!-- ===== O que oferecemos ===== -->
  <section class="fl-section">
    <div class="container">
      <div class="text-center mb-5">
        <span class="fl-tag">NOSSO ESPAÇO</span>
        <h2 class="fl-heading">O que você encontra no <span>FabLab</span></h2>
        <p class="fl-subheading">Um ambiente criativo completo para transformar suas ideias em projetos reais</p>
      </div>

      <div class="row g-4">
        <div class="col-md-6 col-lg-3">
          <div class="fl-card-feature">
            <div class="fl-card-icon"><i class="fas fa-cube"></i></div>
            <h3>Impressão 3D</h3>
            <p>Crie objetos tridimensionais a partir de modelos digitais com nossas impressoras de última geração.</p>
            <a href="{% url 'options:equipamentos' %}" class="fl-link">Ver mais <i class="fas fa-arrow-right ms-1"></i></a>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="fl-card-feature">
            <div class="fl-card-icon"><i class="fas fa-project-diagram"></i></div>
            <h3>Corte a Laser</h3>
            <p>Corte e grave com precisão milimétrica em diversos materiais como madeira, acrílico e tecido.</p>
            <a href="{% url 'options:equipamentos' %}" class="fl-link">Ver mais <i class="fas fa-arrow-right ms-1"></i></a>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="fl-card-feature">
            <div class="fl-card-icon"><i class="fas fa-microchip"></i></div>
            <h3>Eletrônica</h3>
            <p>Desenvolva projetos eletrônicos com nossa bancada completa de componentes e ferramentas.</p>
            <a href="{% url 'options:equipamentos' %}" class="fl-link">Ver mais <i class="fas fa-arrow-right ms-1"></i></a>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="fl-card-feature">
            <div class="fl-card-icon"><i class="fas fa-cogs"></i></div>
            <h3>Prototipagem</h3>
            <p>Transforme sua ideia em um protótipo funcional com suporte técnico especializado.</p>
            <a href="{% url 'options:servicos' %}" class="fl-link">Ver mais <i class="fas fa-arrow-right ms-1"></i></a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Sobre ===== -->
  <section class="fl-section fl-section-alt">
    <div class="container">
      <div class="row align-items-center g-5">
        <div class="col-lg-6 order-lg-2">
          <img src="{% static 'images/sobre/imagem monitores.jpeg' %}" class="img-fluid fl-img-rounded" alt="Interior do laboratório"
               onerror="this.src='https://via.placeholder.com/600x400?text=FabLab'">
        </div>
        <div class="col-lg-6 order-lg-1">
          <span class="fl-tag">QUEM SOMOS</span>
          <h2 class="fl-heading">Conheça o <span>FabLab IFMT</span></h2>
          <p class="fl-subheading mb-4">O Laboratório de Fabricação Digital do IFMT é um espaço colaborativo dedicado à inovação, aprendizagem e desenvolvimento de projetos tecnológicos.</p>
          <ul class="fl-check-list">
            <li><i class="fas fa-check-circle"></i> Parte da rede mundial de laboratórios de fabricação digital</li>
            <li><i class="fas fa-check-circle"></i> Equipamentos modernos para prototipagem rápida</li>
            <li><i class="fas fa-check-circle"></i> Professores e técnicos especializados para orientação</li>
            <li><i class="fas fa-check-circle"></i> Aberto à comunidade acadêmica e parcerias externas</li>
          </ul>
          <a href="{% url 'about' %}" class="fl-btn mt-3">Saiba mais sobre nós</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Projetos em destaque ===== -->
  {% if tem_projetos %}
  <section class="fl-section">
    <div class="container">
      <div class="text-center mb-5">
        <span class="fl-tag">PROJETOS</span>
        <h2 class="fl-heading">Projetos em <span>Destaque</span></h2>
        <p class="fl-subheading">Conheça alguns dos projetos desenvolvidos em nosso laboratório</p>
      </div>
      <div class="row g-4">
        {% for projeto in projetos_destaque %}
          <div class="col-md-6 col-lg-3">
            <a href="{% url 'projetos:detalhe' projeto.slug %}" class="fl-card-project">
              <div class="fl-card-project-img">
                {% if projeto.imagem %}
                {% if projeto.imagem and projeto.imagem.name %}
                <img src="{{ projeto.imagem.url }}" alt="{{ projeto.titulo }}" onerror="this.src='https://via.placeholder.com/350x200?text=Projeto'">
                {% else %}
                <img src="https://via.placeholder.com/350x200?text=Projeto" alt="{{ projeto.titulo }}">
                {% endif %}
                {% else %}
                <div style="height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary),var(--primary-light))"><i class="fas fa-project-diagram" style="font-size:2rem;color:rgba(255,255,255,.4)"></i></div>
                {% endif %}
              </div>
              <div class="fl-card-project-body">
                <h4>{{ projeto.titulo }}</h4>
                <p>{{ projeto.descricao_curta|truncatechars:100 }}</p>
                <div class="fl-tags-row">
                  {% for tag in projeto.tags.all %}<span>{{ tag.nome }}</span>{% endfor %}
                </div>
                <span class="fl-link mt-auto">Ver projeto <i class="fas fa-arrow-right ms-1"></i></span>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
      <div class="text-center mt-5">
        <a href="{% url 'projetos:lista' %}" class="fl-btn fl-btn-outline">Ver todos os projetos</a>
      </div>
    </div>
  </section>
  {% endif %}

  <!-- ===== Estatísticas ===== -->
  <section class="fl-section fl-section-alt">
    <div class="container">
      <div class="row align-items-center g-5">
        <div class="col-lg-5">
          <span class="fl-tag">IMPACTO</span>
          <h2 class="fl-heading">Nosso impacto<br><span>em números</span></h2>
          <p class="fl-subheading">Ao longo dos anos, temos trabalhado para criar um ambiente onde ideias inovadoras possam ganhar vida, impactando estudantes, pesquisadores e a comunidade.</p>
          <a href="{% url 'about' %}" class="fl-btn fl-btn-outline mt-3">Saiba mais sobre nós</a>
        </div>
        <div class="col-lg-7">
          <div class="row g-4">
            <div class="col-6">
              <div class="fl-stat-card">
                <div class="fl-stat-icon"><i class="fas fa-tools"></i></div>
                <div class="fl-stat-number count-up" data-count="12">0</div>
                <div class="fl-stat-label">Equipamentos</div>
              </div>
            </div>
            <div class="col-6">
              <div class="fl-stat-card">
                <div class="fl-stat-icon"><i class="fas fa-project-diagram"></i></div>
                <div class="fl-stat-number count-up" data-count="50">0</div>
                <div class="fl-stat-label">Projetos realizados</div>
              </div>
            </div>
            <div class="col-6">
              <div class="fl-stat-card">
                <div class="fl-stat-icon"><i class="fas fa-users"></i></div>
                <div class="fl-stat-number count-up" data-count="20">0</div>
                <div class="fl-stat-label">Usuários ativos</div>
              </div>
            </div>
            <div class="col-6">
              <div class="fl-stat-card">
                <div class="fl-stat-icon"><i class="fas fa-clock"></i></div>
                <div class="fl-stat-number count-up" data-count="1000">0</div>
                <div class="fl-stat-label">Horas de uso</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Notícias ===== -->
  {% if tem_noticias %}
  <section class="fl-section">
    <div class="container">
      <div class="text-center mb-5">
        <span class="fl-tag">NOVIDADES</span>
        <h2 class="fl-heading">Últimas <span>Notícias</span></h2>
        <p class="fl-subheading">Fique por dentro das novidades do FabLab</p>
      </div>
      <div class="row g-4">
        {% for noticia in noticias %}
          <div class="col-lg-4 col-md-6">
            <a href="{{ noticia.get_absolute_url }}" class="fl-card-news">
              <div class="fl-card-news-img">
                {% if noticia.imagem and noticia.imagem.name %}
                <img src="{{ noticia.imagem.url }}" alt="{{ noticia.titulo }}">
                {% else %}
                <img src="https://via.placeholder.com/320x200?text=Noticia" alt="{{ noticia.titulo }}">
                {% endif %}
                <span class="fl-news-date">{{ noticia.data_publicacao|date:"d/m/Y" }}</span>
                {% if noticia.destaque %}<span class="fl-news-featured"><i class="fas fa-star me-1"></i> Destaque</span>{% endif %}
              </div>
              <div class="fl-card-news-body">
                <h5>{{ noticia.titulo }}</h5>
                <p>{{ noticia.resumo|truncatechars:120 }}</p>
                {% if noticia.hashtags.all %}
                <div class="fl-tags-row mb-3">
                  {% for tag in noticia.hashtags.all %}
                    <span>#{{ tag.nome }}</span>
                  {% endfor %}
                </div>
                {% endif %}
                <span class="fl-link">Leia mais <i class="fas fa-arrow-right ms-1"></i></span>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
      <div class="text-center mt-5">
        <a href="{% url 'options:noticias' %}" class="fl-btn">Ver todas as notícias</a>
      </div>
    </div>
  </section>
  {% endif %}

  <!-- ===== CTA ===== -->
  <section class="fl-cta">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h2>Pronto para começar seu projeto?</h2>
          <p>Venha conhecer nosso espaço e descobrir como podemos ajudar a transformar suas ideias em realidade.</p>
          <div class="d-flex flex-wrap gap-3 justify-content-center mt-4">
            <a href="{% url 'logs:request_visit' %}" class="fl-btn fl-btn-white">Agendar Visita</a>
            <a href="{% url 'logs:agenda_home' %}" class="fl-btn fl-btn-outline-white">Ver Agenda</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Próximos eventos ===== -->
  {% if tem_eventos %}
  <section class="fl-section">
    <div class="container">
      <div class="text-center mb-5">
        <span class="fl-tag">AGENDA</span>
        <h2 class="fl-heading">Próximos <span>eventos</span></h2>
        <p class="fl-subheading">Participe das atividades do nosso laboratório</p>
      </div>
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="fl-timeline">
            {% for evento in proximos_eventos %}
              <div class="fl-timeline-item">
                <div class="fl-timeline-date">
                  <span class="fl-timeline-day">{{ evento.start_time|date:"d" }}</span>
                  <span class="fl-timeline-month">{{ evento.start_time|date:"M" }}</span>
                </div>
                <div class="fl-timeline-content">
                  <div class="fl-timeline-time"><i class="far fa-clock me-1"></i> {{ evento.start_time|date:"H:i" }} - {{ evento.end_time|date:"H:i" }}</div>
                  <h4>{{ evento.title }}</h4>
                  <span class="fl-event-badge
                    {% if evento.event_type == 'internal' %}fl-event-internal{% endif %}
                    {% if evento.event_type == 'workshop' %}fl-event-workshop{% endif %}
                    {% if evento.event_type == 'maintenance' %}fl-event-maintenance{% endif %}">
                    {{ evento.get_event_type_display }}
                  </span>
                  {% if evento.description %}<p>{{ evento.description|truncatechars:120 }}</p>{% endif %}
                  <a href="{% url 'logs:agenda_event_detail' evento.id %}" class="fl-link">Ver detalhes <i class="fas fa-arrow-right ms-1"></i></a>
                </div>
              </div>
            {% endfor %}
          </div>
          <div class="text-center mt-4">
            <a href="{% url 'logs:agenda_home' %}" class="fl-btn">Ver agenda completa</a>
          </div>
        </div>
      </div>
    </div>
  </section>
  {% endif %}

{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Carrossel
    new bootstrap.Carousel(document.getElementById('mainCarousel'), { interval: 6000, wrap: true });

    // Contadores animados
    function animateCounters() {
      document.querySelectorAll('.count-up').forEach(function(el) {
        var target = +el.dataset.count, count = 0;
        var step = target / 120;
        (function update() {
          count += step;
          if (count < target) { el.textContent = Math.ceil(count); requestAnimationFrame(update); }
          else { el.textContent = target; }
        })();
      });
    }

    var stats = document.querySelector('.fl-stat-card');
    if (stats) {
      new IntersectionObserver(function(entries, obs) {
        entries.forEach(function(e) { if (e.isIntersecting) { animateCounters(); obs.unobserve(e.target); } });
      }, { threshold: .4 }).observe(stats);
    }
  });
</script>
{% endblock %}

{% block head %}
<style>
  /* ===== HOME — Design Institucional Moderno ===== */

  /* Hero */
  .fl-hero { position: relative; overflow: hidden; }
  .fl-hero .carousel-item { height: 560px; }
  .fl-hero .carousel-item img { height: 100%; object-fit: cover; filter: brightness(.7); }
  .fl-hero .carousel-caption {
    bottom: 15%; left: 0; right: 0;
    text-align: center;
  }
  .fl-hero .carousel-caption h2 {
    font-family: 'Inter', sans-serif;
    font-size: 3rem;
    font-weight: 800;
    color: #fff;
    text-shadow: 0 2px 20px rgba(0,0,0,.45);
    letter-spacing: -.02em;
    margin-bottom: .5rem;
  }
  .fl-hero .carousel-caption p {
    font-size: 1.15rem;
    color: rgba(255,255,255,.9);
    font-weight: 400;
    text-shadow: 0 1px 8px rgba(0,0,0,.4);
  }
  .fl-hero .carousel-indicators button {
    width: 10px; height: 10px;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,.6);
    background: transparent;
    opacity: .7;
    transition: all .3s;
  }
  .fl-hero .carousel-indicators button.active {
    background: #fff;
    opacity: 1;
    transform: scale(1.25);
  }

  /* Section helpers */
  .fl-section { padding: 5rem 0; }
  .fl-section-alt { background: var(--surface-alt); }

  .fl-tag {
    display: inline-block;
    background: linear-gradient(135deg, var(--accent), var(--accent-light));
    color: #fff;
    font-size: .7rem;
    font-weight: 700;
    letter-spacing: .12em;
    padding: .35rem 1rem;
    border-radius: 999px;
    margin-bottom: .75rem;
    text-transform: uppercase;
  }

  .fl-heading {
    font-size: 2.2rem;
    font-weight: 800;
    color: var(--primary);
    letter-spacing: -.02em;
    margin-bottom: .6rem;
  }
  .fl-heading span { color: var(--accent); }

  .fl-subheading {
    color: var(--text-muted);
    font-size: 1.05rem;
    max-width: 600px;
    margin: 0 auto;
  }

  /* Buttons */
  .fl-btn {
    display: inline-block;
    padding: .7rem 1.8rem;
    font-weight: 600;
    font-size: .9rem;
    border-radius: var(--radius-sm);
    text-decoration: none;
    transition: all var(--transition);
    background: var(--accent);
    color: #fff;
    border: 2px solid var(--accent);
  }
  .fl-btn:hover { background: var(--primary); border-color: var(--primary); color: #fff; transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .fl-btn-outline { background: transparent; color: var(--accent); }
  .fl-btn-outline:hover { background: var(--accent); color: #fff; }
  .fl-btn-white { background: #fff; color: var(--primary); border-color: #fff; }
  .fl-btn-white:hover { background: var(--surface-alt); color: var(--primary); border-color: var(--surface-alt); }
  .fl-btn-outline-white { background: transparent; color: #fff; border-color: rgba(255,255,255,.5); }
  .fl-btn-outline-white:hover { background: rgba(255,255,255,.15); border-color: #fff; color: #fff; }

  .fl-link {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    font-size: .875rem;
    transition: color var(--transition);
  }
  .fl-link:hover { color: var(--primary); }

  /* Feature cards */
  .fl-card-feature {
    background: var(--white);
    border-radius: var(--radius);
    padding: 2rem 1.5rem;
    height: 100%;
    display: flex; flex-direction: column;
    border: 1px solid var(--border);
    transition: all var(--transition);
    position: relative;
    overflow: hidden;
  }
  .fl-card-feature::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 3px;
    background: linear-gradient(90deg, var(--accent), var(--accent-light));
    opacity: 0;
    transition: opacity var(--transition);
  }
  .fl-card-feature:hover { transform: translateY(-6px); box-shadow: var(--shadow-lg); border-color: transparent; }
  .fl-card-feature:hover::before { opacity: 1; }
  .fl-card-icon {
    width: 56px; height: 56px;
    border-radius: var(--radius-sm);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.4rem;
    margin-bottom: 1.2rem;
    background: linear-gradient(135deg, rgba(19,103,138,.08), rgba(69,196,176,.12));
    color: var(--accent);
    transition: all .4s;
  }
  .fl-card-feature:hover .fl-card-icon { background: var(--accent); color: #fff; }
  .fl-card-icon i { transition: transform .5s ease; }
  .fl-card-feature:hover .fl-card-icon i { transform: rotateY(360deg); }
  .fl-card-feature h3 { font-size: 1.15rem; font-weight: 700; margin-bottom: .6rem; color: var(--primary); }
  .fl-card-feature p { font-size: .875rem; color: var(--text-muted); line-height: 1.65; flex: 1; }

  /* Img rounded */
  .fl-img-rounded { border-radius: var(--radius); box-shadow: var(--shadow-lg); }

  /* Check list */
  .fl-check-list { list-style: none; padding: 0; }
  .fl-check-list li {
    padding: .5rem 0 .5rem 1.8rem;
    position: relative;
    font-size: 1rem;
    color: var(--text);
  }
  .fl-check-list li i { position: absolute; left: 0; top: .65rem; color: var(--accent-light); }

  /* Project cards */
  a.fl-card-project, a.fl-card-news { text-decoration: none; color: inherit; display: flex; flex-direction: column; }
  a.fl-card-project:hover, a.fl-card-news:hover { color: inherit; text-decoration: none; }
  .fl-card-project {
    background: var(--white);
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid var(--border);
    transition: all var(--transition);
    height: 100%;
    cursor: pointer;
  }
  .fl-card-project:hover { transform: translateY(-6px); box-shadow: var(--shadow-lg); border-color: transparent; }
  .fl-card-project-img { height: 200px; overflow: hidden; }
  .fl-card-project-img img { width: 100%; height: 100%; object-fit: cover; transition: transform .5s; }
  .fl-card-project:hover .fl-card-project-img img { transform: scale(1.06); }
  .fl-card-project-body { padding: 1.25rem; flex: 1; display: flex; flex-direction: column; }
  .fl-card-project-body h4 { font-size: 1.05rem; font-weight: 700; color: var(--primary); margin-bottom: .4rem; }
  .fl-card-project-body p { font-size: .85rem; color: var(--text-muted); }

  .fl-tags-row { display: flex; flex-wrap: wrap; gap: .35rem; }
  .fl-tags-row span, .fl-tags-row a {
    background: rgba(19,103,138,.08);
    color: var(--accent);
    padding: .25rem .65rem;
    border-radius: 999px;
    font-size: .75rem;
    font-weight: 600;
    text-decoration: none;
    transition: all var(--transition);
  }
  .fl-tags-row a:hover { background: var(--accent); color: #fff; }

  /* Stat cards */
  .fl-stat-card {
    background: var(--white);
    border-radius: var(--radius);
    padding: 1.8rem;
    text-align: center;
    border: 1px solid var(--border);
    transition: all var(--transition);
  }
  .fl-stat-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); border-color: transparent; }
  .fl-stat-icon { font-size: 1.8rem; color: var(--accent); margin-bottom: .8rem; }
  .fl-stat-number { font-size: 2.4rem; font-weight: 800; color: var(--primary); line-height: 1; margin-bottom: .25rem; }
  .fl-stat-label { font-size: .8rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: .05em; }

  /* News cards */
  .fl-card-news {
    background: var(--white);
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid var(--border);
    transition: all var(--transition);
    height: 100%;
    cursor: pointer;
  }
  .fl-card-news:hover { transform: translateY(-6px); box-shadow: var(--shadow-lg); border-color: transparent; }
  .fl-card-news-img { position: relative; height: 200px; overflow: hidden; }
  .fl-card-news-img img { width: 100%; height: 100%; object-fit: cover; transition: transform .5s; }
  .fl-card-news:hover .fl-card-news-img img { transform: scale(1.06); }
  .fl-news-date {
    position: absolute; top: .75rem; left: .75rem;
    background: var(--accent); color: #fff;
    padding: .3rem .7rem; border-radius: 999px;
    font-size: .75rem; font-weight: 600;
  }
  .fl-news-featured {
    position: absolute; top: .75rem; right: .75rem;
    background: #F59E0B; color: #fff;
    padding: .3rem .7rem; border-radius: 999px;
    font-size: .75rem; font-weight: 600;
  }
  .fl-card-news-body { padding: 1.25rem; }
  .fl-card-news-body h5 { font-size: 1.05rem; font-weight: 700; color: var(--primary); margin-bottom: .4rem; line-height: 1.4; }
  .fl-card-news-body p { font-size: .85rem; color: var(--text-muted); line-height: 1.6; }

  /* CTA */
  .fl-cta {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    padding: 5rem 0;
    position: relative;
    overflow: hidden;
  }
  .fl-cta::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(circle at 20% 50%, rgba(69,196,176,.15) 0%, transparent 60%);
    pointer-events: none;
  }
  .fl-cta h2 { font-size: 2rem; font-weight: 800; color: #fff; margin-bottom: .8rem; }
  .fl-cta p { font-size: 1.05rem; color: rgba(255,255,255,.8); max-width: 520px; margin: 0 auto; }

  /* Timeline */
  .fl-timeline { position: relative; padding-left: 2.5rem; }
  .fl-timeline::before {
    content: '';
    position: absolute; left: 18px; top: 0; bottom: 0;
    width: 2px; background: var(--border);
  }
  .fl-timeline-item { position: relative; margin-bottom: 2rem; }
  .fl-timeline-date {
    position: absolute; left: -2.5rem; top: 0;
    width: 38px; height: 38px;
    border-radius: 50%;
    background: var(--accent); color: #fff;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    line-height: 1.1; z-index: 1;
  }
  .fl-timeline-day { font-weight: 800; font-size: .85rem; }
  .fl-timeline-month { font-size: .55rem; text-transform: uppercase; font-weight: 600; }
  .fl-timeline-content {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1.25rem 1.5rem;
    transition: box-shadow var(--transition);
  }
  .fl-timeline-content:hover { box-shadow: var(--shadow-md); }
  .fl-timeline-time { font-size: .8rem; color: var(--text-muted); margin-bottom: .3rem; }
  .fl-timeline-content h4 { font-size: 1.05rem; font-weight: 700; color: var(--primary); margin-bottom: .4rem; }
  .fl-event-badge {
    display: inline-block;
    padding: .25rem .6rem;
    border-radius: 999px;
    font-size: .7rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: .5rem;
  }
  .fl-event-internal { background: var(--accent); }
  .fl-event-workshop { background: #10B981; }
  .fl-event-maintenance { background: #F59E0B; }
  .fl-timeline-content p { font-size: .875rem; color: var(--text-muted); margin-bottom: .5rem; }

  /* Responsive */
  @media (max-width: 992px) {
    .fl-hero .carousel-item { height: 420px; }
    .fl-hero .carousel-caption h2 { font-size: 2rem; }
    .fl-heading { font-size: 1.8rem; }
    .fl-section { padding: 3.5rem 0; }
  }
  @media (max-width: 576px) {
    .fl-hero .carousel-item { height: 300px; }
    .fl-hero .carousel-caption h2 { font-size: 1.5rem; }
    .fl-hero .carousel-caption p { font-size: .9rem; }
    .fl-heading { font-size: 1.5rem; }
  }
</style>
{% endblock %}