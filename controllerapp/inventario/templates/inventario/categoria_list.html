{% extends 'layout.html' %}
{% load static %}

{% block title %}Categorias — Inventário{% endblock %}

{% block content %}
<section style="background:var(--surface-alt);padding:1rem 0;border-bottom:1px solid var(--border)">
  <div class="container">
    <nav class="iv-breadcrumb"><a href="{% url 'inventario:dashboard' %}"><i class="fas fa-arrow-left me-1"></i> Dashboard</a> <span class="mx-2">/</span> <span>Categorias</span></nav>
  </div>
</section>

<section class="iv-header">
  <div class="container">
    <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
      <h1 class="iv-page-title"><i class="fas fa-tags me-2"></i> Categorias</h1>
      <a href="{% url 'inventario:categoria_create' %}" class="iv-btn iv-btn-primary"><i class="fas fa-plus me-1"></i> Nova Categoria</a>
    </div>
  </div>
</section>

<section class="fl-section" style="padding-top:2rem">
  <div class="container" style="max-width:800px">
    {% if categorias %}
    <div class="iv-cat-grid">
      {% for cat in categorias %}
      <a href="{% url 'inventario:item_list' %}?categoria={{ cat.id }}" class="iv-cat-card">
        <div class="iv-cat-card-icon"><i class="fas fa-folder"></i></div>
        <div class="iv-cat-card-body">
          <h4>{{ cat.nome }}</h4>
          <p>{{ cat.descricao|truncatewords:12|default:"Sem descrição" }}</p>
        </div>
        <div class="iv-cat-card-count">{{ cat.total_itens }} <small>itens</small></div>
      </a>
      {% endfor %}
    </div>
    {% else %}
    <div class="iv-card" style="padding:3rem;text-align:center">
      <i class="fas fa-folder-open" style="font-size:2rem;color:var(--border);display:block;margin-bottom:.75rem"></i>
      <p style="color:var(--text-muted);margin:0">Nenhuma categoria cadastrada. <a href="{% url 'inventario:categoria_create' %}" style="color:var(--accent);font-weight:600">Crie uma agora</a>.</p>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block head %}
<style>
  .iv-header{background:var(--white);padding:2rem 0;border-bottom:1px solid var(--border)}
  .iv-page-title{font-size:1.6rem;font-weight:800;color:var(--primary);margin:0}
  .iv-breadcrumb{font-size:.85rem}.iv-breadcrumb a{color:var(--accent);text-decoration:none;font-weight:600}.iv-breadcrumb span:last-child{color:var(--text-muted)}
  .iv-btn{display:inline-flex;align-items:center;padding:.55rem 1.1rem;border-radius:var(--radius-sm);font-size:.85rem;font-weight:600;text-decoration:none;transition:all var(--transition)}
  .iv-btn-primary{background:var(--primary);color:#fff}.iv-btn-primary:hover{background:var(--primary-light);color:#fff;transform:translateY(-1px)}
  .iv-card{background:var(--white);border:1px solid var(--border);border-radius:var(--radius)}
  .iv-cat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:1rem}
  .iv-cat-card{display:flex;align-items:center;gap:1rem;background:var(--white);border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem;text-decoration:none;transition:all var(--transition)}
  .iv-cat-card:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.06);border-color:var(--accent)}
  .iv-cat-card-icon{width:44px;height:44px;border-radius:var(--radius-sm);background:rgba(19,103,138,.08);display:flex;align-items:center;justify-content:center;color:var(--accent);font-size:1.1rem;flex-shrink:0}
  .iv-cat-card-body{flex:1;min-width:0}
  .iv-cat-card-body h4{font-size:.95rem;font-weight:700;color:var(--primary);margin:0}.iv-cat-card-body p{font-size:.78rem;color:var(--text-muted);margin:.2rem 0 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .iv-cat-card-count{text-align:center;font-size:1.3rem;font-weight:800;color:var(--accent);line-height:1}.iv-cat-card-count small{display:block;font-size:.65rem;font-weight:500;color:var(--text-muted)}
  @media(max-width:768px){.iv-cat-grid{grid-template-columns:1fr}}
</style>
{% endblock %}